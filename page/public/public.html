<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=390, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>KÖNIGIN - Home</title>
  <link rel="stylesheet" href="../../style/home.css">
  <link rel="stylesheet" href="../../style/footer.css">
  <link rel="stylesheet" href="../../style/wine-menu.css">
  <link rel="stylesheet" href="../../style/mobile.css">
  <script src="../../js/wine-menu.js" defer></script>

  <style>
:root{
  --safe-top: env(safe-area-inset-top, 0px);
  --safe-bottom: env(safe-area-inset-bottom, 0px);
}

 html, body {
      margin: 0; padding: 0;
      width: 100vw;
      height: 100vh;
      background: #191919;
      overflow: hidden;
    }
    .app-frame {
      width: 100vw;
      height: 100vh;
      max-width: 100vw;
      max-height: 100vh;
      position: relative;
      margin: 0;
      border-radius: 0;
      overflow: hidden;
      box-shadow: none;
      background: #191919;
      padding-top: env(safe-area-inset-top, 0px);
      padding-bottom: calc(clamp(56px, 9vh, 72px) + var(--safe-bottom) + 20px);

      /* 完全填充屏幕 */
      top: 0; left: 0; right: 0; bottom: 0;
      box-sizing: border-box;
    }
    .main-bg {
      position: absolute;
      left: 0; top: 0;
      width: 100%;
      height: 100%;
      background: url('../../img/public/public_bg.png') center center/cover no-repeat;
      background-size: cover;
      background-position: center;
      z-index: 1;
      /* 由app-frame控制圆角 */
    }
    
    .title {
      position: absolute;
      top: 10%; left: 50%;
      transform: translateX(-50%) scale(1.5);
      width: 120vw; height: 20vw;
      max-width: 300px; max-height: 80px;
      min-width: 200px; min-height: 50px;
      background: url('../../img/public/title.png') center center/contain no-repeat;
      z-index: 3;
      pointer-events: none;
    }

    /* 酒瓶热点样式 */
    .wine-hotspot {
      position: absolute;
      /* 定位在第二层架子的酒瓶位置 */
      top: 35%;
      left: 43%;
      width: 8%;
      height: 10%;
      background: transparent;
      border: 2px solid rgba(218, 165, 32, 0.3);
      border-radius: 8px;
      cursor: pointer;
      z-index: 5;
      /* 发光效果 */
      box-shadow: 
        0 0 30px rgba(218, 165, 32, 0.6),
        0 0 60px rgba(218, 165, 32, 0.4),
        0 0 90px rgba(218, 165, 32, 0.2),
        inset 0 0 30px rgba(218, 165, 32, 0.2);
      /* 呼吸动画 */
      animation: wine-breathe 2.5s ease-in-out infinite;
      /* 过渡效果 */
      transition: all 0.3s ease;
      /* 无障碍支持 */
      outline: none;
    }

    /* 悬停效果 */
    .wine-hotspot:hover {
      border-color: rgba(218, 165, 32, 0.8);
      box-shadow: 
        0 0 40px rgba(218, 165, 32, 0.8),
        0 0 80px rgba(218, 165, 32, 0.6),
        0 0 120px rgba(218, 165, 32, 0.4),
        inset 0 0 40px rgba(218, 165, 32, 0.3);
      animation: wine-breathe-hover 1.8s ease-in-out infinite;
      transform: scale(1.05);
    }

    /* 激活效果 */
    .wine-hotspot:active {
      transform: scale(0.95);
      box-shadow: 
        0 0 15px rgba(218, 165, 32, 0.3),
        0 0 30px rgba(218, 165, 32, 0.1);
    }

    /* 焦点效果（无障碍） */
    .wine-hotspot:focus {
      border-color: rgba(218, 165, 32, 0.8);
      box-shadow: 
        0 0 25px rgba(218, 165, 32, 0.5),
        0 0 50px rgba(218, 165, 32, 0.3),
        0 0 0 3px rgba(218, 165, 32, 0.2);
    }

    /* 呼吸动画 */
    @keyframes wine-breathe {
      0%, 100% {
        box-shadow: 
          0 0 30px rgba(218, 165, 32, 0.6),
          0 0 60px rgba(218, 165, 32, 0.4),
          0 0 90px rgba(218, 165, 32, 0.2),
          inset 0 0 30px rgba(218, 165, 32, 0.2);
        border-color: rgba(218, 165, 32, 0.4);
      }
      50% {
        box-shadow: 
          0 0 50px rgba(218, 165, 32, 0.9),
          0 0 100px rgba(218, 165, 32, 0.7),
          0 0 150px rgba(218, 165, 32, 0.5),
          inset 0 0 50px rgba(218, 165, 32, 0.4);
        border-color: rgba(218, 165, 32, 0.7);
      }
    }

    /* 悬停时的呼吸动画 */
    @keyframes wine-breathe-hover {
      0%, 100% {
        box-shadow: 
          0 0 40px rgba(218, 165, 32, 0.8),
          0 0 80px rgba(218, 165, 32, 0.6),
          0 0 120px rgba(218, 165, 32, 0.4),
          inset 0 0 40px rgba(218, 165, 32, 0.3);
        border-color: rgba(218, 165, 32, 0.8);
      }
      50% {
        box-shadow: 
          0 0 60px rgba(218, 165, 32, 1),
          0 0 120px rgba(218, 165, 32, 0.8),
          0 0 180px rgba(218, 165, 32, 0.6),
          inset 0 0 60px rgba(218, 165, 32, 0.5);
        border-color: rgba(218, 165, 32, 1);
      }
    }

    /* 响应式设计 */
    @media (max-width: 768px) {
      .wine-hotspot {
        /* 移动端稍微调整位置和大小 */
        top: 40%;
        left: 32%;
        width: 9%;
        height: 12%;
        border-width: 1px;
      }
    }

    @media (max-width: 480px) {
      .wine-hotspot {
        /* 小屏幕进一步调整 */
        top: 42%;
        left: 33%;
        width: 14%;
        height: 12%;
      }
    }

    /* 提示语样式 */
    .instruction-tooltip {
      position: fixed;
      bottom: 40%;
      left: 50%;
      transform: translateX(-50%);
      background: transparent;
      color: #ffffff;
      padding: 15px 25px;
      font-size: 16px;
      font-weight: 500;
      text-align: center;
      z-index: 10;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.8s ease;
      max-width: 90%;
      line-height: 1.6;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
      white-space: pre-line;
    }

    .instruction-tooltip.show {
      opacity: 1;
      visibility: visible;
    }

    .instruction-tooltip.fade-out {
      opacity: 0;
    }

    /* 响应式提示语 */
    @media (max-width: 768px) {
      .instruction-tooltip {
        bottom: 25%;
        font-size: 14px;
        padding: 12px 20px;
        max-width: 85%;
        line-height: 1.5;
        text-shadow: 0 2px 6px rgba(0, 0, 0, 0.7);
      }
    }

    @media (max-width: 480px) {
      .instruction-tooltip {
        bottom: 30%;
        font-size: 13px;
        padding: 10px 18px;
        max-width: 80%;
        line-height: 1.4;
        text-shadow: 0 2px 8px rgba(0, 0, 0, 0.8);
      }
    }
    

    
    

    
    

    .bottom-mask {
      position: absolute;
      left: 0; bottom: 0;
      width: 100%;
      height: 92px;  /* 可覆盖footer高度+阴影 */
      background: #191919;
      border-bottom-left-radius: 0;
      border-bottom-right-radius: 0;
      z-index: 3;
      pointer-events: none;
    }  

    /* 酒单样式 */
    .wine-menu-overlay {
      position: fixed;
      top: 0; left: 0;
      width: 100vw; height: 100vh;
      background: rgba(0, 0, 0, 0.8);
      z-index: 1000;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
      backdrop-filter: blur(5px);
    }

    .wine-menu-overlay.show {
      opacity: 1;
      visibility: visible;
    }

    .wine-menu-container {
      position: absolute;
      bottom: 0; left: 0;
      width: 100%;
      height: 85vh;
      background: linear-gradient(135deg, #8B4513 0%, #A0522D 50%, #CD853F 100%);
      border-top-left-radius: 20px;
      border-top-right-radius: 20px;
      transform: translateY(100%);
      transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      overflow: hidden;
    }

    .wine-menu-overlay.show .wine-menu-container {
      transform: translateY(0);
    }

    .wine-menu-header {
      position: relative;
      padding: 20px;
      text-align: center;
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
    }

    .wine-menu-title {
      font-size: 24px;
      font-weight: bold;
      color: #FFF;
      margin: 0;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
    }

    .wine-menu-close {
      position: absolute;
      top: 20px; right: 20px;
      width: 30px; height: 30px;
      background: rgba(255, 255, 255, 0.2);
      border: none;
      border-radius: 50%;
      color: #FFF;
      font-size: 18px;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .wine-menu-close:hover {
      background: rgba(255, 255, 255, 0.3);
      transform: scale(1.1);
    }

    .filter-chips {
      display: flex;
      gap: 10px;
      padding: 15px 20px;
      overflow-x: auto;
      background: rgba(255, 255, 255, 0.05);
    }

    .filter-chip {
      padding: 8px 16px;
      background: rgba(255, 255, 255, 0.2);
      border: 1px solid rgba(255, 255, 255, 0.3);
      border-radius: 20px;
      color: #FFF;
      font-size: 14px;
      cursor: pointer;
      white-space: nowrap;
      transition: all 0.3s ease;
    }

    .filter-chip.active {
      background: rgba(255, 255, 255, 0.4);
      border-color: rgba(255, 255, 255, 0.6);
      transform: scale(1.05);
    }

    .wine-cards-container {
      flex: 1;
      padding: 20px;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    .wine-card {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border-radius: 15px;
      padding: 20px;
      border: 1px solid rgba(255, 255, 255, 0.2);
      transition: all 0.3s ease;
      transform: translateY(20px);
      opacity: 0;
    }

    .wine-card.show {
      transform: translateY(0);
      opacity: 1;
    }

    .wine-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      border-color: rgba(255, 255, 255, 0.4);
    }

    .wine-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 15px;
    }

    .wine-info {
      flex: 1;
    }

    .wine-name {
      font-size: 18px;
      font-weight: bold;
      color: #FFF;
      margin: 0 0 5px 0;
    }

    .wine-subtitle {
      font-size: 14px;
      color: rgba(255, 255, 255, 0.8);
      margin: 0;
    }

    .wine-abv {
      background: rgba(255, 255, 255, 0.2);
      padding: 4px 8px;
      border-radius: 10px;
      font-size: 12px;
      color: #FFF;
      font-weight: bold;
    }

    .wine-details {
      display: flex;
      gap: 15px;
      margin-bottom: 15px;
    }

    .wine-detail {
      display: flex;
      align-items: center;
      gap: 5px;
      font-size: 12px;
      color: rgba(255, 255, 255, 0.7);
    }

    .wine-detail-label {
      font-weight: bold;
    }

    .wine-note {
      font-size: 14px;
      color: rgba(255, 255, 255, 0.9);
      font-style: italic;
      margin-bottom: 15px;
      line-height: 1.4;
    }

    .wine-enter-btn {
      background: linear-gradient(45deg, #FFD700, #FFA500);
      border: none;
      padding: 10px 20px;
      border-radius: 25px;
      color: #000;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      width: 100%;
    }

    .wine-enter-btn:hover {
      transform: scale(1.05);
      box-shadow: 0 5px 15px rgba(255, 215, 0, 0.4);
    }

    /* 玻璃背柜效果 */
    .wine-menu-container::before {
      content: '';
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="glass" x="0" y="0" width="20" height="20" patternUnits="userSpaceOnUse"><rect width="20" height="20" fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="0.5"/></pattern></defs><rect width="100" height="100" fill="url(%23glass)"/></svg>');
      opacity: 0.3;
      pointer-events: none;
    }

    </style>
</head>
<body>
  <div class="app-frame">
    <div class="main-bg"></div>
    <div class="title"></div>
    <!-- 酒瓶热点 -->
    <button class="wine-hotspot" id="wineHotspot" 
            aria-label="点击打开酒单" 
            title="点击查看酒单">
    </button>
  </div>
  <!-- 如果你底部有圆角遮罩可以用 -->
  <div class="bottom-mask"></div>

  <!-- 提示语 -->
  <div class="instruction-tooltip" id="instructionTooltip">
    点击发光酒瓶查看文章
    向右滑动进入图集存放
  </div>

  <!-- 酒单弹窗 -->
  <div class="wine-menu-overlay" id="wineMenuOverlay">
    <div class="wine-list-wrapper">
      <div class="wine-list">
        <div class="wine-list-viewport" id="wineListViewport">
          <!-- 酒水选项将通过JavaScript动态生成 -->
        </div>
      </div>
      <div class="wine-scrollbar">
        <div class="track"></div>
        <div class="thumb"></div>
      </div>
    </div>
  </div>



  <!-- Footer自动插入点 -->
  <div id="footer-placeholder"></div>
<script src="../../js/footer.js"></script>
<script>
// 页面初始化
document.addEventListener('DOMContentLoaded', function() {
  console.log('Public page loaded');
  
  // 检查背景图片
  const mainBg = document.querySelector('.main-bg');
  if (mainBg) {
    console.log('Main background element found');
    console.log('Background style:', mainBg.style.background);
  } else {
    console.error('Main background element not found');
  }
  
  // 检查标题元素
  const titleElement = document.querySelector('.title');
  if (titleElement) {
    console.log('Title element found');
    console.log('Title background style:', titleElement.style.background);
  } else {
    console.error('Title element not found');
  }
  
  // 酒瓶热点事件处理
  const wineHotspot = document.getElementById('wineHotspot');
  
  if (wineHotspot) {
    console.log('Wine hotspot found, adding event listeners');
    
    // 点击/触摸事件处理
    const handleWineHotspotClick = function(e) {
      e.preventDefault();
      e.stopPropagation();
      console.log('Wine hotspot clicked/touched');
      
      // 添加点击反馈动画
      wineHotspot.style.transform = 'scale(0.9)';
      setTimeout(() => {
        wineHotspot.style.transform = '';
      }, 150);
      
      // 打开酒单
      openWineMenu();
    };
    
    // 添加事件监听器
    wineHotspot.addEventListener('click', handleWineHotspotClick);
    wineHotspot.addEventListener('touchend', handleWineHotspotClick);
    
    // 键盘支持（无障碍）
    wineHotspot.addEventListener('keydown', function(e) {
      if (e.key === 'Enter' || e.key === ' ') {
        e.preventDefault();
        handleWineHotspotClick(e);
      }
    });
    
    console.log('Wine hotspot event listeners added');
  } else {
    console.error('Wine hotspot not found');
  }
  
  // 提示语显示控制
  const instructionTooltip = document.getElementById('instructionTooltip');
  
  if (instructionTooltip) {
    console.log('Instruction tooltip found, setting up display');
    
    // 页面加载后立即显示提示语
    instructionTooltip.classList.add('show');
    console.log('Instruction tooltip shown');
    
    // 3秒后开始淡出
    setTimeout(() => {
      instructionTooltip.classList.add('fade-out');
      console.log('Instruction tooltip fading out');
      
      // 淡出动画完成后隐藏元素
      setTimeout(() => {
        instructionTooltip.style.display = 'none';
        console.log('Instruction tooltip hidden');
      }, 800); // 等待淡出动画完成
    }, 3000); // 3秒后开始淡出
    
    // 如果用户开始交互，立即隐藏提示语
    const hideTooltipOnInteraction = () => {
      if (instructionTooltip.classList.contains('show')) {
        instructionTooltip.classList.add('fade-out');
        setTimeout(() => {
          instructionTooltip.style.display = 'none';
        }, 500);
      }
    };
    
    // 监听各种交互事件
    document.addEventListener('click', hideTooltipOnInteraction);
    document.addEventListener('touchstart', hideTooltipOnInteraction);
    document.addEventListener('keydown', hideTooltipOnInteraction);
    
    console.log('Instruction tooltip event listeners added');
  } else {
    console.error('Instruction tooltip not found');
  }
  
  // 右滑跳转功能
  let touchStartX = 0;
  let touchStartY = 0;
  let touchEndX = 0;
  let touchEndY = 0;
  let isSwipeGesture = false;
  
  // 添加触摸事件监听器到整个页面
  document.addEventListener('touchstart', function(e) {
    touchStartX = e.touches[0].clientX;
    touchStartY = e.touches[0].clientY;
    isSwipeGesture = false;
    console.log('Touch start - X:', touchStartX, 'Y:', touchStartY);
  });
  
  document.addEventListener('touchmove', function(e) {
    const currentX = e.touches[0].clientX;
    const currentY = e.touches[0].clientY;
    const deltaX = currentX - touchStartX;
    const deltaY = currentY - touchStartY;
    
    // 如果水平滑动距离大于垂直滑动距离，且超过阈值，标记为滑动手势
    if (Math.abs(deltaX) > Math.abs(deltaY) && Math.abs(deltaX) > 20) {
      isSwipeGesture = true;
      console.log('Swipe gesture detected - deltaX:', deltaX, 'deltaY:', deltaY);
    }
  });
  
  document.addEventListener('touchend', function(e) {
    touchEndX = e.changedTouches[0].clientX;
    touchEndY = e.changedTouches[0].clientY;
    
    const deltaX = touchEndX - touchStartX;
    const deltaY = touchEndY - touchStartY;
    
    console.log('Touch end - deltaX:', deltaX, 'deltaY:', deltaY, 'isSwipeGesture:', isSwipeGesture);
    
    // 检测左滑手势
    if (isSwipeGesture && deltaX < -50 && Math.abs(deltaY) < 100) {
      console.log('Left swipe detected, navigating to render.html');
      // 跳转到 render.html
      window.location.href = 'render.html';
    }
  });
  
  // 检查footer是否加载
  setTimeout(() => {
    const footer = document.querySelector('.bottom-nav');
    if (footer) {
      console.log('Footer loaded successfully');
    } else {
      console.log('Footer not found, checking placeholder');
      const placeholder = document.getElementById('footer-placeholder');
      console.log('Footer placeholder:', placeholder);
    }
  }, 1000);
});
</script>
</body>
</html>
