<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>KÖNIGIN - 咖啡的房间</title>

  <link rel="stylesheet" href="/style/footer.css">
  <link rel="stylesheet" href="/style/mobile.css">
  <style>
:root{
  --safe-top: env(safe-area-inset-top, 0px);
  --safe-bottom: env(safe-area-inset-bottom, 0px);
  --vh: 1vh;
}
@supports (height: 100svh){
  :root{ --vh: 1svh; }
}

/* ✅ 允许页面自然滚动，避免锁死 */
html, body{
  margin:0; padding:0;
  width:100%;
  min-height: calc(var(--vh) * 100);
  background:#191919;
  overflow-x:hidden;       /* 只禁水平滚动 */
  overflow-y:auto;         /* 允许竖向滚动 */
}

/* ✅ 容器用 min-height，别用固定 100vh/overflow:hidden */
.app-frame{
  width:100%;
  max-width:1440px;
  min-height: calc(var(--vh) * 100);
  position:relative;
  margin:0 auto;
  box-shadow:none;
  background:#191919;
  border-radius:0;
  overflow:visible;        /* 让内部元素能显示/滚动 */
  padding-top: var(--safe-top);
  padding-bottom: var(--safe-bottom); /* 底栏额外留白由 footer.css 统一处理 */
  box-sizing:border-box;
}

/* 背景仍可用绝对定位，不影响滚动 */
.static-bg-container,
.bg-static{
  position:absolute;
  left:0; top:0;
  width:100%; height:100%;
  overflow:hidden;
  z-index:1;
}
.bg-static{
  background-image:url('../../img/guest/209bg.png');
  background-size:cover;
  background-position:center;
  background-repeat:no-repeat;
}

/* 内容层 */
.content-layer{
  position:absolute;
  inset:0;
  z-index:2;
  pointer-events:none;
}
.content-layer > *{ pointer-events:auto; }

/* 门牌 */
.guest-title{
  position:absolute;
  top:-3%;
  left:50%;
  transform:translateX(-50%);
  width:750px; height:300px;
  background:url('../../img/guest/coffee.png') center/contain no-repeat;
  z-index:2;
  pointer-events:none;
}

/* ✅ 交互按钮尺寸更稳：不要纯 vw */
.interaction-btn{
  position:absolute;
  z-index:10;
  top:65%;
  left:35%;
  transform:translate(-50%,-50%);
  cursor:pointer;
}
.interaction-btn img{
  /* 56px 到 100px，随视口缩放 */
  width: clamp(56px, 12vmin, 100px);
  height: clamp(56px, 12vmin, 100px);
  display:block;
  pointer-events:auto;
  transition: transform .2s ease, filter .2s ease;
}

.interaction-btn:hover img{ filter:brightness(1.2); transform:scale(1.05); }
.interaction-btn:active img{ filter:brightness(.85); transform:scale(.95); }

/* 底部遮罩可留，但务必在底栏下层（z-index < 999） */
.bottom-mask{
  position:absolute; left:0; bottom:0; width:100%;
  height:92px; background:#191919; z-index:3; pointer-events:none;
}

/* 移动端细化（可保留） */
@media (max-width:768px){
  .bg-static{ background-size:cover; background-position:center; }
}
    
    

    .interaction-btn:active img {
  /* 可选：按下变暗或缩放 */
  filter: brightness(0.8);
  transform: scale(0.92);
}
@keyframes btn-blink {
  0%   { opacity: 1; filter: drop-shadow(0 0 0px #fff6) brightness(1); }
  40%  { opacity: 0.6; filter: drop-shadow(0 0 8px #e6f3ff) brightness(1.3);}
  60%  { opacity: 1; filter: drop-shadow(0 0 16px #b5e2ff) brightness(1.5);}
  100% { opacity: 1; filter: drop-shadow(0 0 0px #fff6) brightness(1); }
}
.interaction-btn.blink img {
  animation: btn-blink 1.2s infinite;
  /* 可选：动画节奏平滑 */
  animation-timing-function: ease-in-out;
}
  </style>
</head>
<body>
  <div class="app-frame">
    <div class="bg-static"></div>
    <div class="guest-title"></div>
    
    <!-- 交互按钮 -->
    <a href="#" class="interaction-btn blink" title="Interaction" id="interactionButton">
      <img src="../../img/default btn.png" alt="Interaction Button"/>
    </a>
      
    
    <div class="bottom-mask"></div>
  </div>

  <!-- Footer自动插入点 -->
  <div id="footer-placeholder"></div>
<script src="../../js/mobile-optimization.js"></script>
<script src="../../js/footer.js"></script>
<script>
// 页面初始化
document.addEventListener('DOMContentLoaded', function() {
  console.log('coffee page loaded');
  
  // 检查footer是否加载
  setTimeout(() => {
    const footer = document.querySelector('.bottom-nav');
    if (footer) {
      console.log('Footer loaded successfully');
    } else {
      console.log('Footer not found, checking placeholder');
      const placeholder = document.getElementById('footer-placeholder');
      console.log('Footer placeholder:', placeholder);
    }
  }, 1000);
  
  // 交互按钮点击事件
    const interactionButton = document.getElementById('interactionButton');
  if (interactionButton) {
    console.log('Interaction button found, adding event listener');

    // ✅ 只绑定一次 pointerup（兼容触摸+鼠标），避免 touchend/click 冲突
    const handleInteraction = function(e) {
      e.preventDefault();
      e.stopPropagation();
      console.log('Interaction triggered →  redirecting to owl.html');
      
      // 直接跳转到 owl.html
      window.location.href = '../../article/private/owl.html';
    };
    
    // 清理旧事件
    interactionButton.replaceWith(interactionButton.cloneNode(true));
    const newBtn = document.getElementById('interactionButton') || document.querySelector('.interaction-btn');

    // 确保按钮可点
    newBtn.style.pointerEvents = 'auto';
    newBtn.style.zIndex = '999';

    // 使用 pointerup 代替 click/touchend
    newBtn.addEventListener('pointerup', handleInteraction, { passive: false });

    console.log('Interaction button event listener (pointerup) added');
  } else {
    console.error('Interaction button not found');
  }

  
  
  // 初始化页面元素检查
  console.log('=== Page Elements Check ===');
  console.log('bgStatic:', document.querySelector('.bg-static') ? 'Found' : 'Not found');
  console.log('interactionButton:', interactionButton ? 'Found' : 'Not found');
  console.log('========================');
});
</script>
</body>
</html>

