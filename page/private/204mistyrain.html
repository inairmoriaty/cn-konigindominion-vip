<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>KÖNIGIN - Misty Rain</title>

  <link rel="stylesheet" href="/style/footer.css">
  <link rel="stylesheet" href="/style/mobile.css">
  <style>
    :root {
      --safe-top: env(safe-area-inset-top, 0px);
      --safe-bottom: env(safe-area-inset-bottom, 0px);
    }

    html, body {
      margin: 0; 
      padding: 0;
      width: 100vw;
      height: 100vh;
      background: #191919;
      overflow: hidden;
    }

    .app-frame {
      width: 100%;
      height: 100vh;
      max-width: 1440px;
      position: relative;
      margin: 0 auto;
      border-radius: 0;
      overflow: hidden;
      box-shadow: none;
      background: #191919;
      padding-top: env(safe-area-inset-top, 0px);
      padding-bottom: env(safe-area-inset-bottom, 0px);
      top: 0; 
      left: 0; 
      right: 0; 
      bottom: 0;
      box-sizing: border-box;
    }

    /* 静态背景容器 */
    .static-bg-container {
      position: absolute;
      left: 0; 
      top: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
      z-index: 1;
    }

    /* 背景图片容器 - 静态显示 */
    .bg-static {
      position: absolute;
      left: 0; 
      top: 0;
      width: 100%;
      height: 100%;
      background-image: url('../../img/guest/mistyrain_bg.png');
      background-size: cover; /* 覆盖整个容器 */
      background-position: center center;
      background-repeat: no-repeat;
    }

    /* 内容层 */
    .content-layer {
      position: absolute;
      left: 0; 
      top: 0;
      width: 100%;
      height: 100%;
      z-index: 2;
      pointer-events: none;
    }

    .content-layer > * {
      pointer-events: auto;
    }

    /* 标题 */
    .page-title {
      position: absolute;
      top: 5%;
      left: 50%;
      transform: translateX(-50%);
      width: 300px;
      height: 120px;
      z-index: 2;
      pointer-events: none;
    }

    /* 门牌 */
    .guest-title {
      position: absolute;
      top: -3%; 
      left: 50%;
      transform: translateX(-50%);
      width: 750px; 
      height: 300px;
      background: url('../../img/guest/mistyrain_door.png') center center/contain no-repeat;
      z-index: 2;
      pointer-events: none;
      opacity: 1; /* 静态显示，始终可见 */
    }

    /* 交互按钮 */
    .interaction-btn {
      position: absolute;
      z-index: 10;
      display: block;
      cursor: pointer;
      top: 70%; /* 按钮位置，大约75%从顶部 */
      left: 50%; /* 按钮位置，居中 */
      transform: translate(-50%, -50%);
    }

    .interaction-btn img {
      width: 8vw;
      height: 8vw;
      min-width: 60px;
      min-height: 60px;
      max-width: 100px;
      max-height: 100px;
      display: block;
      pointer-events: auto;
      transition: all 0.2s ease;
    }

    .interaction-btn:hover img {
      filter: brightness(1.2);
      transform: scale(1.05);
    }

    .interaction-btn:active img {
      filter: brightness(0.8);
      transform: scale(0.95);
    }

    /* 按钮显示/隐藏控制 */
    .interaction-btn {
      opacity: 1; /* 静态显示，始终可见 */
      visibility: visible;
      transition: opacity 0.3s ease, visibility 0.3s ease;
      pointer-events: auto;
    }

    /* 底部遮罩 */
    .bottom-mask {
      position: absolute;
      left: 0; 
      bottom: 0;
      width: 100%;
      height: 92px;
      background: #191919;
      z-index: 3;
      pointer-events: none;
    }

    /* 响应式调整 */
    @media (max-width: 768px) {
      /* 移动端背景图优化 */
      .bg-static {
        background-size: cover;
        background-position: center center;
      }
    }

    
    .interaction-btn:active img {
      /* 可选：按下变暗或缩放 */
      filter: brightness(0.8);
      transform: scale(0.92);
    }
    
    @keyframes btn-blink {
      0%   { opacity: 1; filter: drop-shadow(0 0 0px #fff6) brightness(1); }
      40%  { opacity: 0.6; filter: drop-shadow(0 0 8px #e6f3ff) brightness(1.3);}
      60%  { opacity: 1; filter: drop-shadow(0 0 16px #b5e2ff) brightness(1.5);}
      100% { opacity: 1; filter: drop-shadow(0 0 0px #fff6) brightness(1); }
    }
    
    .interaction-btn.blink img {
      animation: btn-blink 1.2s infinite;
      /* 可选：动画节奏平滑 */
      animation-timing-function: ease-in-out;
    }
  </style>
</head>
<body>
  <div class="app-frame">
    <div class="bg-static"></div>
    <div class="guest-title"></div>
    
    <!-- 交互按钮 -->
    <a href="#" class="interaction-btn blink" title="Interaction" id="interactionButton">
      <img src="../../img/default btn.png" alt="Interaction Button"/>
    </a>
      

    
    <div class="bottom-mask"></div>
  </div>

  <!-- Footer自动插入点 -->
  <div id="footer-placeholder"></div>
<script src="../../js/mobile-optimization.js"></script>
<script src="../../js/footer.js"></script>
<script>
// 页面初始化
document.addEventListener('DOMContentLoaded', function() {
  console.log('Misty Rain page loaded');
  
  // 检查footer是否加载
  setTimeout(() => {
    const footer = document.querySelector('.bottom-nav');
    if (footer) {
      console.log('Footer loaded successfully');
    } else {
      console.log('Footer not found, checking placeholder');
      const placeholder = document.getElementById('footer-placeholder');
      console.log('Footer placeholder:', placeholder);
    }
  }, 1000);
  
  // 交互按钮点击事件
  const interactionButton = document.getElementById('interactionButton');
  
  if (interactionButton) {
    console.log('Interaction button found, adding event listeners');
    // 同时支持点击和触摸
    const handleInteractionClick = function(e) {
      e.preventDefault();
      e.stopPropagation();
      console.log('Interaction button clicked/touched');
      
      // 直接跳转
      window.location.href = '../../article/private/mindgame/catalog.html';
    };
    
    // 确保按钮可以接收事件
    interactionButton.style.pointerEvents = 'auto';
    interactionButton.style.zIndex = '20'; // 确保按钮在最上层
    
    interactionButton.addEventListener('click', handleInteractionClick);
    interactionButton.addEventListener('touchend', handleInteractionClick);
    console.log('Interaction button event listeners added');
  } else {
    console.error('Interaction button not found');
  }
  
  // 初始化页面元素检查
  console.log('=== Page Elements Check ===');
  console.log('bgStatic:', document.querySelector('.bg-static') ? 'Found' : 'Not found');
  console.log('interactionButton:', interactionButton ? 'Found' : 'Not found');
  console.log('========================');
});
</script>
</body>
</html>

