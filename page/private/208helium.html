<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>KÃ–NIGIN - æ°¦æ°”çš„æˆ¿é—´</title>

  <link rel="stylesheet" href="/style/footer.css">
  <link rel="stylesheet" href="/style/mobile.css">
  <style>
:root{
  --safe-top: env(safe-area-inset-top, 0px);
  --safe-bottom: env(safe-area-inset-bottom, 0px);
  --vh: 1vh;
}
@supports (height: 100svh){
  :root{ --vh: 1svh; }
}

html, body{
  margin:0; padding:0;
  width:100%;
  min-height: calc(var(--vh) * 100);
  background:#191919;
  overflow-x:hidden;       /* åªç¦æ°´å¹³æ»šåŠ¨ */
  overflow-y:auto;         /* å…è®¸ç«–å‘æ»šåŠ¨ */
}


.app-frame{
  width:100%;
  max-width:1440px;
  min-height: calc(var(--vh) * 100);
  position:relative;
  margin:0 auto;
  box-shadow:none;
  background:#191919;
  border-radius:0;
  overflow:visible;        /* è®©å†…éƒ¨å…ƒç´ èƒ½æ˜¾ç¤º/æ»šåŠ¨ */
  padding-top: var(--safe-top);
  padding-bottom: var(--safe-bottom); /* åº•æ é¢å¤–ç•™ç™½ç”± footer.css ç»Ÿä¸€å¤„ç† */
  box-sizing:border-box;
}

    /* é™æ€èƒŒæ™¯å®¹å™¨ */
.static-bg-container,
.bg-static{
  position:absolute;
  left:0; top:0;
  width:100%; height:100%;
  overflow:hidden;
  z-index:1;
}

    /* èƒŒæ™¯å›¾ç‰‡å®¹å™¨ - é™æ€æ˜¾ç¤º */
.bg-static{      background-image: url('../../img/guest/208bg.png');
      background-size: cover; /* è¦†ç›–æ•´ä¸ªå®¹å™¨ */
      background-position: center center;
      background-repeat: no-repeat;
    }

    /* å†…å®¹å±‚ */
    .content-layer {
      position: absolute;
      left: 0; 
      top: 0;
      width: 100%;
      height: 100%;
      z-index: 2;
      pointer-events: none;
    }

    .content-layer > * {
      pointer-events: auto;
    }

    /* æ ‡é¢˜ */
    .page-title {
      position: absolute;
      top: 5%;
      left: 50%;
      transform: translateX(-50%);
      width: 300px;
      height: 120px;
      z-index: 2;
      pointer-events: none;
    }

    /* é—¨ç‰Œ */
    .guest-title {
      position: absolute;
      top: -3%; 
      left: 50%;
      transform: translateX(-50%);
      width: 750px; 
      height: 300px;
      background: url('../../img/guest/helium.png') center center/contain no-repeat;
      z-index: 2;
      pointer-events: none;
      opacity: 1; /* é™æ€æ˜¾ç¤ºï¼Œå§‹ç»ˆå¯è§ */
    }

    /* äº¤äº’æŒ‰é’® */
    .interaction-btn {
      position: absolute;
      z-index: 10;
      display: block;
      cursor: pointer;
      top: 58%; /* æŒ‰é’®ä½ç½®ï¼Œå¤§çº¦75%ä»é¡¶éƒ¨ */
      left: 50%; /* æŒ‰é’®ä½ç½®ï¼Œå±…ä¸­ */
      transform: translate(-50%, -50%);
    }

.interaction-btn img{
  /* 56px åˆ° 100pxï¼Œéšè§†å£ç¼©æ”¾ */
  width: clamp(56px, 12vmin, 100px);
  height: clamp(56px, 12vmin, 100px);
  display:block;
  pointer-events:auto;
  transition: transform .2s ease, filter .2s ease;
}
    .interaction-btn:hover img {
      filter: brightness(1.2);
      transform: scale(1.05);
    }

    .interaction-btn:active img {
      filter: brightness(0.8);
      transform: scale(0.95);
    }

    /* æŒ‰é’®æ˜¾ç¤º/éšè—æ§åˆ¶ */
    .interaction-btn {
      opacity: 1; /* é™æ€æ˜¾ç¤ºï¼Œå§‹ç»ˆå¯è§ */
      visibility: visible;
      transition: opacity 0.3s ease, visibility 0.3s ease;
      pointer-events: auto;
    }

    /* åº•éƒ¨é®ç½© */
.bottom-mask{
  position:absolute; left:0; bottom:0; width:100%;
  height:92px; background:#191919; z-index:3; pointer-events:none;
}
    /* å“åº”å¼è°ƒæ•´ */
    @media (max-width: 768px) {
      /* ç§»åŠ¨ç«¯èƒŒæ™¯å›¾ä¼˜åŒ– */
      .bg-static {
        background-size: cover;
        background-position: center center;
      }
    }

    
/* å®¢å•æ»šè½®é€‰é¡¹åŒºåŸŸ â€”â€” é»˜è®¤ä¸æ¥æ”¶ç‚¹å‡»ï¼Œæ˜¾ç¤ºæ—¶å†æ‰“å¼€ */
.guest-list-wrapper{
  position: absolute;
  left: 53%;
  transform: translateX(-50%);
  top: 22%;
  width: 180px;

  /* ç»Ÿä¸€å¯è§†é«˜åº¦ä¸º 3 è¡Œ*72 = 216pxï¼ˆè¡Œé«˜ç¨³å®šï¼Œæ‰‹æ„Ÿç±»ä¼¼ iOSï¼‰ */
  height: 216px;

  z-index: 20;
  display: flex;
  align-items: stretch;
  gap: 12px;

  opacity: 0;
  visibility: hidden;
  pointer-events: none;              /* ğŸ‘ˆ éšè—æ—¶ä¸æŠ¢äº‹ä»¶ */
  transition: opacity .3s ease, visibility .3s ease;

  /* æ€§èƒ½ä¼˜åŒ– */
  will-change: opacity, transform;
}
.guest-list-wrapper.show {
  opacity: 1;
  visibility: visible;
  pointer-events: auto;              /* ğŸ‘ˆ æ˜¾ç¤ºæ—¶å¯ç‚¹ */
}

/* å®¹å™¨å†…å±‚ï¼šä¿ç•™æ¸éšè’™ç‰ˆï¼Œè®©ä¸­é—´åŒºåŸŸæ›´èšç„¦ */
.guest-list{
  position: relative;
  flex: 1 1 auto;
  height: 100%;
  overflow: hidden;

  /* ä¸Šä¸‹æ¸éšï¼ˆ36px è¾¹ç¼˜ï¼‰ */
  -webkit-mask-image: linear-gradient(to bottom,
    rgba(0,0,0,0) 0,
    rgba(0,0,0,1) 36px,
    rgba(0,0,0,1) calc(100% - 36px),
    rgba(0,0,0,0) 100%);
  mask-image: linear-gradient(to bottom,
    rgba(0,0,0,0) 0,
    rgba(0,0,0,1) 36px,
    rgba(0,0,0,1) calc(100% - 36px),
    rgba(0,0,0,0) 100%);
}

/* è§†å£ï¼š3 è¡Œå¯è§ï¼ˆ216pxï¼‰ï¼Œå¸é™„æ»šåŠ¨ã€è§¦æ‘¸æ»šåŠ¨å¢å¼º */
.guest-list-viewport{
  height: 216px;                     /* ğŸ‘ˆ å›ºå®š 3 è¡Œå¯è§ */
  overflow-y: auto;
  padding-right: 8px;
  scrollbar-width: none;             /* Firefox éšè—æ»šåŠ¨æ¡ */

  /* è§¦æ‘¸ä¼˜åŒ– */
  -webkit-overflow-scrolling: touch; /* iOS æƒ¯æ€§æ»šåŠ¨ */
  overscroll-behavior: contain;      /* é˜²çˆ¶çº§è”åŠ¨ */
  touch-action: pan-y;               /* å‘Šè¯‰æµè§ˆå™¨è¿™æ˜¯çºµå‘æ»šåŠ¨ */

  /* å¸é™„æ»šåŠ¨ï¼šåœåœ¨â€œè¡Œä¸­å¿ƒâ€é™„è¿‘ */
  scroll-snap-type: y mandatory;
}
.guest-list-viewport::-webkit-scrollbar{ display: none; }

/* å•é¡¹ï¼šè¡Œé«˜ç¨³å®šï¼ˆ72px = 48 + ä¸Šä¸‹å„ 12pxï¼‰ */
.guest-item{
  /* å°½é‡å æ»¡ï¼Œå‘½ä¸­ç‡æ›´é«˜ */
  width: 100%;
  box-sizing: border-box;

  height: 48px;          /* å…ƒç´ æœ¬ä½“é«˜åº¦ */
  padding: 0 10px;
  margin: 12px 0;        /* ä¸Šä¸‹å„ 12pxï¼Œæ€»è¡Œè·=72px */
  display: flex;
  align-items: center;
  justify-content: center;

  color: #fff;
  font-size: 16px;
  font-family: "SimSun","å®‹ä½“",serif;
  letter-spacing: .5px;
  user-select: none;
  cursor: pointer;

  /* è§†è§‰ */
  background: linear-gradient(180deg, #5a5a5a 0%, #4a4a4a 45%, #414141 100%);
  border: 1px solid #696969;
  border-radius: 14px;
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,.12),
    inset 0 -2px 4px rgba(0,0,0,.35),
    0 2px 10px rgba(0,0,0,.25);
  transition: transform .15s ease, background .2s ease;

  /* å¸é™„å¯¹é½åˆ°å®¹å™¨ä¸­å¿ƒçº¿ */
  scroll-snap-align: center;

  /* ç§»åŠ¨ç«¯ä½“éªŒ */
  -webkit-tap-highlight-color: transparent;
  touch-action: manipulation;
  will-change: transform;
}
.guest-item:hover {
  background: linear-gradient(180deg, #6a6a6a 0%, #5a5a5a 45%, #515151 100%);
  transform: scale(1.02);
}
.guest-item:active {
  transform: scale(0.98);
}    

    .interaction-btn:active img {
  /* å¯é€‰ï¼šæŒ‰ä¸‹å˜æš—æˆ–ç¼©æ”¾ */
  filter: brightness(0.8);
  transform: scale(0.92);
}
@keyframes btn-blink {
  0%   { opacity: 1; filter: drop-shadow(0 0 0px #fff6) brightness(1); }
  40%  { opacity: 0.6; filter: drop-shadow(0 0 8px #e6f3ff) brightness(1.3);}
  60%  { opacity: 1; filter: drop-shadow(0 0 16px #b5e2ff) brightness(1.5);}
  100% { opacity: 1; filter: drop-shadow(0 0 0px #fff6) brightness(1); }
}
.interaction-btn.blink img {
  animation: btn-blink 1.2s infinite;
  /* å¯é€‰ï¼šåŠ¨ç”»èŠ‚å¥å¹³æ»‘ */
  animation-timing-function: ease-in-out;
}
  </style>
</head>
<body>
  <div class="app-frame">
    <div class="bg-static"></div>
    <div class="guest-title"></div>
    
    <!-- äº¤äº’æŒ‰é’® -->
    <a href="#" class="interaction-btn blink" title="Interaction" id="interactionButton">
      <img src="../../img/default btn.png" alt="Interaction Button"/>
    </a>
      
    <!-- å®¢å•æ»šè½®é€‰é¡¹ï¼ˆé»˜è®¤éšè—ï¼‰ -->
    <div class="guest-list-wrapper" id="guestList">
      <div class="guest-list">
        <div class="guest-list-viewport" id="guestViewport">
          <div class="guest-item" data-article="toxic.html">ç—…æ€å…³ç³»</div>
          <div class="guest-item" data-article="1005.html">æœ«è·¯</div>
        </div>
      </div>
    </div>
    
    <div class="bottom-mask"></div>
  </div>

  <!-- Footerè‡ªåŠ¨æ’å…¥ç‚¹ -->
  <div id="footer-placeholder"></div>
<script src="../../js/mobile-optimization.js"></script>
<script src="../../js/footer.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', () => {
    console.log('helium page loaded');
  
    // ï¼ˆå¯é€‰ï¼‰æ£€æŸ¥ footer æ˜¯å¦æ³¨å…¥
    setTimeout(() => {
      const footer = document.querySelector('.bottom-nav');
      console.log(footer ? 'Footer loaded successfully' : 'Footer not found');
    }, 1000);
  
    // å·¥å…·å‡½æ•°ï¼šæ¯æ¬¡åŠ¨æ€å–å½“å‰æŒ‰é’®å¼•ç”¨ï¼ˆé¿å… replaceWith åæ—§å¼•ç”¨å¤±æ•ˆï¼‰
    const getBtn = () => document.getElementById('interactionButton') || document.querySelector('.interaction-btn');
    const guestList = document.getElementById('guestList');
    let isGuestListVisible = false;
  
    // ===== äº¤äº’æŒ‰é’®ï¼šç»Ÿä¸€ç”¨ pointerupï¼Œå…¼å®¹è§¦æ‘¸/é¼ æ ‡ =====
    (() => {
      const btn = getBtn();
      if (!btn) {
        console.warn('Interaction button not found');
        return;
      }
  
      // å¤„ç†å‡½æ•°
      const handleInteraction = (e) => {
        e.preventDefault();
        e.stopPropagation();
        isGuestListVisible = !isGuestListVisible;
        if (guestList) guestList.classList.toggle('show', isGuestListVisible);
        console.log(isGuestListVisible ? 'Guest list shown' : 'Guest list hidden');
      };
  
      // å»é™¤æ—§ç›‘å¬ï¼Œæœ€ç¨³å¦¥æ–¹å¼ï¼šå…‹éš†æ›¿æ¢ä¸€æ¬¡ï¼Œå†é‡æ–°æ‹¿å¼•ç”¨
      btn.replaceWith(btn.cloneNode(true));
      const newBtn = getBtn();
      newBtn.style.pointerEvents = 'auto';
      newBtn.style.zIndex = '999';
      newBtn.addEventListener('pointerup', handleInteraction, { passive: false });
      console.log('Interaction event listener (pointerup) added');
    })();
  
    // ===== ç‚¹å‡»ç©ºç™½å¤„æ”¶èµ·æ»šè½® =====
    const dismissGuest = (e) => {
      if (!isGuestListVisible || !guestList) return;
      const btnNow = getBtn();
      const clickOnButton = btnNow && btnNow.contains(e.target);
      const clickOnPanel = guestList.contains(e.target);
      if (!clickOnButton && !clickOnPanel) {
        isGuestListVisible = false;
        guestList.classList.remove('show');
        console.log('Guest list hidden by outside click');
      }
    };
    document.addEventListener('pointerup', dismissGuest, { passive: true });
  
    // ===== æ»šè½®é€‰é¡¹ç‚¹å‡»è·³è½¬ï¼ˆåŒæ ·ç”¨ pointerupï¼‰=====
    const saveArticleHierarchySession = () => {
      const session = {
        timestamp: Date.now(),
        expiry: Date.now() + 30 * 60 * 1000, // 30åˆ†é’Ÿ
      };
      sessionStorage.setItem('article_hierarchy_session', JSON.stringify(session));
      console.log('Articleå±‚çº§ä¼šè¯å·²ä¿å­˜');
    };
  
    document.querySelectorAll('.guest-item').forEach((item) => {
      const handleGuestItem = (e) => {
        e.preventDefault();
        e.stopPropagation();
        const file = item.getAttribute('data-article');
        if (file) {
          saveArticleHierarchySession();
          window.location.href = `../../article/private/${file}`;
        }
      };
      item.addEventListener('pointerup', handleGuestItem, { passive: false });
    });
  
    // ===== è°ƒè¯•è¾“å‡º =====
    console.log('=== Page Elements Check ===');
    console.log('bgStatic:', document.querySelector('.bg-static') ? 'Found' : 'Not found');
    console.log('interactionButton:', !!getBtn());
    console.log('guestList:', !!guestList);
    console.log('========================');
  });
  </script>
</body>
</html>

